<div class="actions-container">
  <div class="button-container left-buttons">
    <button mat-button class="action-button" (click)="goToPrevious()">
      Prethodna
    </button>
    <button mat-button class="action-button" (click)="goToCurrent()">
      Trenutna
    </button>
    <button mat-button class="action-button" (click)="goToNext()">
      Sledeca
    </button>
  </div>

  <div class="welcome-banner">
    <span>Dobrodo≈°li, {{ username }}</span>
    <button mat-button class="action-button logout-button" (click)="logout()">
      Logout
    </button>
  </div>

  <div class="current-view">
    @if (currentView === CalendarView.Week) {
      <span>
        {{ startDate | date: 'MMMM d, y' }} - {{ endDate | date: 'MMMM d, y' }}
      </span>
    }
    @if (currentView === CalendarView.Month) {
      <span>
        {{ startDate | date: 'MMMM y' }}
      </span>
    }
  </div>

  <div class="button-container right-buttons">
    <button mat-button class="action-button" (click)="changeViewToWeek()">
      Nedelja
    </button>
    <button mat-button class="action-button" (click)="changeViewToMonth()">
      Mesec
    </button>
  </div>
</div>
<div class="last-week-events-bar">
  @for (event of lastWeekEvents; track event) {
    <div
      class="event-item"
      draggable="true"
      (dragstart)="onDragStart($event, event)">
      {{ event.meta.company_name || event.company_name }}
    </div>
  }
</div>
<div>
  @switch (view) {
    @case ('month') {
      <mwl-calendar-month-view
        [viewDate]="viewDate"
        [events]="events"
        [locale]="locale"
        [excludeDays]="[0]"
        [refresh]="reportService.refreshView"
        >
      </mwl-calendar-month-view>
    }
    @case ('week') {
      <mwl-calendar-week-view
        class="calendar-container"
        [viewDate]="viewDate"
        [events]="events"
        [dayStartHour]="7"
        [dayEndHour]="17"
        [excludeDays]="[0]"
        [hourSegments]="2"
        [refresh]="reportService.refreshView"
        [locale]="locale"
        (drop)="onDrop($event)"
        (dragover)="allowDrop($event)"
        (eventTimesChanged)="eventTimesChanged($event)"
        (eventClicked)="handleEvent('Clicked', $event.event)"
        >
        <ng-template #columnTemplate let-day="day">
          <div class="cal-day-column" [attr.data-date]="day.date | date: 'yyyy-MM-dd'">
            <!-- Custom content here -->
          </div>
        </ng-template>
      </mwl-calendar-week-view>
    }
  }
</div>
